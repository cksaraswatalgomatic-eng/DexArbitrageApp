<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DexArbitrageApp - User Documentation</title>
    <script src="/auth-check.js"></script>
    <link rel="icon" href="/favicon.ico">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="stylesheet" href="/styles.css" />
    <link rel="stylesheet" href="/design-system.css" />
    <link rel="stylesheet" href="/light-theme.css" id="theme-link" disabled />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
        as="style" onload="this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
    </noscript>
</head>

<body data-page="docs">
    <header class="app-header">
        <div class="brand-block" id="brand">
            <img class="brand-img" src="/color_logo.png" onerror="this.src='/color_logo.svg'" alt="Logo" />
            <div class="brand-text">
                <span class="brand-title">DEX Arbitrage</span>
                <span class="page-label">Documentation</span>
            </div>
        </div>
        <div class="primary-nav">
            <button id="nav-dropdown-button" class="icon-btn nav-toggle" aria-haspopup="true"
                aria-controls="nav-dropdown" aria-expanded="false" aria-label="Toggle navigation">&#9776;</button>
            <nav class="nav-dropdown" id="nav-dropdown" aria-label="Primary navigation">
                <a class="nav-link" data-route="dashboard" href="/">Dashboard</a>
                <a class="nav-link" data-route="pair-analysis" href="/pair-analysis.html">Pair Analysis</a>
                <a class="nav-link" data-route="token-analysis" href="/token-analysis.html">Token Analysis</a>
                <a class="nav-link" data-route="diff-analysis" href="/diff-analysis.html">Diff Analysis</a>
                <a class="nav-link" data-route="contract-analysis" href="/contract-analysis.html">Contract Analysis</a>
                <a class="nav-link" data-route="liquidity-monitoring" href="/liquidity-monitoring.html">Liquidity
                    Monitoring</a>
                <a class="nav-link" data-route="reports" href="/reports.html">Reports &amp; Analytics</a>
                <a class="nav-link requires-admin" data-route="consolidated" href="/consolidated-tracking.html"
                    data-requires-role="admin">Consolidated Tracking</a>
            </nav>
        </div>
        <div class="header-actions">
            <button id="theme-switcher" class="icon-btn" title="Toggle Theme"
                aria-label="Toggle theme">&#127769;</button>
            <label class="field">
                <span class="field-label">Server</span>
                <select id="serverSelect"></select>
            </label>
            <a class="icon-btn" href="/docs.html" title="Documentation" aria-label="Documentation"
                style="color: var(--accent-cyan);">&#128218;</a>
            <button id="refreshBtn" class="btn-ghost" title="Refresh now" type="button">Refresh</button>
            <span id="lastUpdated" class="chip chip-muted">?</span>
            <a class="icon-btn requires-admin" href="/servers.html" data-requires-role="admin" title="Server settings"
                aria-label="Server settings">&#9881;</a>
            <a class="icon-btn" href="/notifications.html" title="Notifications"
                aria-label="Notifications">&#128276;</a>
            <button class="icon-btn logout-btn" data-action="logout" title="Log out"
                aria-label="Log out">&#128274;</button>
        </div>
    </header>

    <main>
        <div class="docs-container docs-grid">
            <!-- Intro - Full Width -->
            <section class="card full-width" id="intro">
                <h2>Introduction</h2>
                <p>Welcome to the DexArbitrageApp. This application helps you track and analyze cryptocurrency
                    arbitrage opportunities between Decentralized Exchanges (DEXs) and Centralized Exchanges (CEXs).
                    It provides real-time balance tracking, trade history analysis, and powerful reporting tools.
                </p>
            </section>

            <!-- Dashboard Guide -->
            <section class="card" id="dashboard">
                <h2>Dashboard Guide</h2>
                <h3>Total Balance & Equity</h3>
                <p>The main dashboard displays your total equity across all tracked exchanges. The <strong>Equity
                        Curve</strong> visualizes your portfolio's growth over time, combining DEX assets (USDT +
                    Coins) and Binance Futures positions (Wallet + Unrealized PnL).</p>
                <h3>Exchange Balances</h3>
                <p>Monitor your balances on individual exchanges. The tables filter out small dust balances (default
                    > 0.1 USDT) to keep the view clean.</p>
            </section>

            <!-- Trade Analysis -->
            <section class="card" id="trades">
                <h2>Trade Analysis</h2>
                <h3>Completed Trades</h3>
                <p>This table lists all executed trades. Key columns include:</p>
                <ul>
                    <li><strong>Profit</strong>: Color-coded (Green for positive, Red for negative).</li>
                    <li><strong>Slippage</strong>: <code>DexSlip</code> and <code>CexSlip</code> show the price
                        impact of your trades.</li>
                    <li><strong>Props</strong>: Metadata tags indicating the strategy used (e.g., <code>Diff</code>,
                        <code>Hedge</code>).
                    </li>
                </ul>
                <h3>Pair Analysis</h3>
                <p>Navigate to the <strong>Pair Analysis</strong> page to see which token pairs are performing best.
                    Use the "Win Rate" and "Total Loss" charts to identify consistent winners and risky assets.</p>
            </section>

            <!-- Diff Analysis -->
            <section class="card" id="diff-analysis">
                <h2>Diff Analysis</h2>
                <p>The <strong>Diff Analysis</strong> page allows you to visualize the price difference (spread)
                    between DEX and CEX over time.</p>
                <ul>
                    <li><strong>Blue Line</strong>: Buy Diff (Price difference when buying).</li>
                    <li><strong>Dots</strong>: Executed trades, colored Neon Green (Profit) or Neon Red (Loss).</li>
                </ul>
                <p>Use the "Load More" button to fetch historical data in chunks.</p>
            </section>

            <!-- Reports & Analytics -->
            <section class="card" id="reports">
                <h2>Reports & Analytics</h2>
                <p>The <strong>Reports</strong> page offers deep insights into your trading performance.</p>
                <ul>
                    <li><strong>KPI Cards</strong>: Summary of Total Profit, Volume, and Win Rate.</li>
                    <li><strong>Filters</strong>: Slice data by Time Range, Pair, Exchange, or Strategy.</li>
                    <li><strong>Exports</strong>: Download trade history or pair performance as CSV files for
                        external analysis.</li>
                </ul>
            </section>

            <!-- Notifications -->
            <section class="card" id="notifications">
                <h2>Notifications</h2>
                <p>Stay informed with configurable alerts via Telegram, Slack, or Email.</p>
                <ul>
                    <li><strong>Profit Alerts</strong>: Get notified when a trade exceeds a certain profit
                        threshold.</li>
                    <li><strong>Low Gas</strong>: Warnings when your wallet gas balance is critically low.</li>
                    <li><strong>Digests</strong>: Daily and Hourly summaries of your trading activity.</li>
                </ul>
            </section>

            <!-- Troubleshooting -->
            <section class="card" id="troubleshooting">
                <h2>Troubleshooting</h2>
                <p><strong>No Data Showing?</strong> Check if the backend server is running and if the remote APIs
                    are reachable.</p>
                <p><strong>Charts not loading?</strong> Try refreshing the page or clearing your browser cache.</p>
            </section>
        </div>
    </main>

    <script src="/servers-client.js"></script>
    <script src="/theme-switcher.js"></script>
    <script src="/mobile-menu.js"></script>
    <script src="/logout.js"></script>
    <script>
        // Initialize server select if available
        if (window.ServersClient) {
            const serverSelect = document.getElementById('serverSelect');
            if (serverSelect) {
                window.ServersClient.init(serverSelect);
            }
        }
        // Simple refresh button handler
        document.getElementById('refreshBtn')?.addEventListener('click', () => {
            window.location.reload();
        });
    </script>
</body>

</html>